---
title: 初识进程和线程
date: 2018-03-24 12:44:34
tags:
	- Python
categories:
	- Python
	- Concurrency
comments: false
---

在学习 Python 的中多进程和多线程之前，要弄清楚什么是进程？ 而什么又是线程？
### 进程（`Process`）
> 对于操作系统来说，一个任务就是一个进程，比如打开 `Pycharm` 就是启动了 Pycharm 进程，打开 QQ 就是启动了 QQ 进程，每一个进程的启动都会先产生一个线程，就是主线程，然后由这个主线程去创建其它子线程
### 线程 (`Thread`)
> 线程被包含在进程中，是进程实际的运作单位，被称为微进程，一个进程中可以有多个线程，一个进程可以同时并发多个线程，每条线程并行执行不同的任务
<!-- more -->

### 进程和线程的区别
* 进程之间是相互独立的，多进程中的，进程之间的变量是不会相互影响的，但是一个进程内的多个线程是内存共享的，所以线程间的变量是共享的
* 因为进程之间是相互独立的，所以进程间的崩溃不会影响到其它进程，但是由于线程是包含在进程内部的，所以线程的崩溃会引发进程的崩溃，继而造成同一进程中的其它线程也崩溃
* 进程的启动速度慢，线程的启动速度快，但是两者运行速度没有可比性

#### 并行和比并发的理解
并行是并发，但是并发不一定是并行，并行需要满足的要求是:CPU的核心数大于进程的数量，这才是并行，如果 CPU 的核心数小于进程的数量，那么就是并发了，不能称为并行，所以说，并行是并发，但是并发不是并行

### 创建一个进程
```Python
# 以下方式适用于 linux/unix/mac
import os

pid = os.fork()
print()

```

#### 耗时任务和阻塞任务
> 耗时用进程，阻塞用线程，因为线程遇到阻塞会自动切换

```Python
# 阻塞
def func():
	time.sleep(5)

func()

# 耗时任务
print('fib  start...', time.strftime('%H:%M:%S', time.localtime()))
def  fib(n):
    if n == 0:
        return  1
    elif n == 1:
        return 1
    else:
        return  fib(n-1) + fib(n-2)

print(fib(35))
print('fib  end...', time.strftime('%H:%M:%S', time.localtime()))
```


